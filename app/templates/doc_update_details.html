{% extends "doc_dashboard.html" %}

{% block doc_dashboard_content %}

<div class="main-bar">
    <div class="d-flex bg-light my-dash pt-2" style="height: auto;">
        <h3 class="text-center ms-auto me-auto"> Update Details</h3>
    </div>
    <div class="card my-profile">
        <div class="card-body text-center">
            <div class="row"> <!-- Center the content horizontally -->
                <div class="col-12"> <!-- Make it 50% width on medium screens and above -->
                    <div class="d-flex justify-content-between">
                        <legend class="text-center me-5 mt-3 text-success">
                            Work Experience
                        </legend>
                    </div>
                    {% for ex in experiences %}
                    <form method="POST" class="text-start needs-validation"  action="{{ url_for('doctor.update_details', id=ex.id) }}" novalidate>
                        {{ experience_form.csrf_token(id='experience_csrf_token') }}
                        
                        <div class="card shadow mb-3">
                            <div class="card ">
                            <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                
                                <div class="form-group">
                                    {{ experience_form.start_date.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if experience_form.start_date.errors %}
                                        {{ experience_form.start_date(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in experience_form.start_date.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ experience_form.start_date(class="form-control form-control-sm", style="height: 30px;", value=ex.start_date) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ experience_form.end_date.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if experience_form.end_date.errors %}
                                        {{ experience_form.end_date(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in experience_form.end_date.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ experience_form.end_date(class="form-control form-control-sm", style="height: 30px;", value=ex.end_date) }}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ experience_form.position.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if experience_form.position.errors %}
                                        {{ experience_form.position(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in experience_form.position.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ experience_form.position(class="form-control form-control-sm", style="height: 30px;", value=ex.position) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ experience_form.company.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if experience_form.company.errors %}
                                        {{ experience_form.company(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in experience_form.company.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ experience_form.company(class="form-control form-control-sm", style="height: 30px;", value=ex.company, autocomplete="organization") }}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <button type="submit" class="btn-outline-success mt-3 me-5" ><i class="fa-solid fa-pen-to-square fs-4 pt-1 text-success"></i></button>
                            <a class="mt-3" href="{{ url_for('doctor.delete_details', id=ex.id) }}"><i class="fa-solid fa-trash text-danger border border-2 border-danger pe-2 ps-2 pt-2 pb-1 fs-5"></i></a>
                        </div>
                    </div>
                </div>
            </div>
                    </form>
                    {% endfor %}
                    <legend class="me-5 mt-3 text-success">
                            
                        Education
                    </legend>
                    {% for edu in educations %}
                    <form method="POST" class="text-start needs-validation" action="/update_details/{{edu.id}}" novalidate>
                        {{ education_form.csrf_token(id='education_csrf_token') }} 
                        <div class="card shadow mb-3">
                            <div class="card ">
                            <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    {{ education_form.date_started.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if education_form.date_started.errors %}
                                        {{ education_form.date_started(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in education_form.date_started.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ education_form.date_started(class="form-control form-control-sm", style="height: 30px;", value= edu.date_started) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    {{ education_form.date_ended.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if education_form.date_ended.errors %}
                                        {{ education_form.date_ended(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in education_form.date_ended.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ education_form.date_ended(class="form-control form-control-sm", style="height: 30px;", value=edu.date_ended) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="{{ education_form.certificate_type.id }}" class="form-control-label mt-2 mb-2 fw-bold">
                                        {{ education_form.certificate_type.label.text }}
                                    </label>
                                    {% if education_form.certificate_type.errors %}
                                        {{ education_form.certificate_type(class="form-select is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in education_form.certificate_type.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        <select id="{{ education_form.certificate_type.id }}" name="certificate_type" class="form-select" style="height: 37px;">
                                            {% for choice in education_form.certificate_type.choices %}
                                                {% if choice[0] == edu.certificate_type %}
                                                    <option value="{{ choice[0] }}" selected>{{ choice[1] }}</option>
                                                {% else %}
                                                    <option value="{{ choice[0] }}">{{ choice[1] }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    {% endif %}
                                </div>
                            </div>
                            
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ education_form.school.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if education_form.school.errors %}
                                        {{ education_form.school(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in education_form.school.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ education_form.school(class="form-control form-control-sm", style="height: 30px;", value=edu.school) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ education_form.course_of_study.label(class="form-control-label mt-2 mb-2 fw-bold") }}
                                    {% if education_form.course_of_study.errors %}
                                        {{ education_form.course_of_study(class="form-control form-control-sm is-invalid") }}
                                        <div class="invalid-feedback">
                                            {% for error in education_form.course_of_study.errors %}
                                                <span>{{ error }}</span>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ education_form.course_of_study(class="form-control form-control-sm", style="height: 30px;", value= edu.course_of_study) }}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <button type="submit" class="btn-outline-success mt-3 me-5" ><i class="fa-solid fa-pen-to-square fs-4 pt-1 text-success"></i></button>
                            <a class="mt-3" href="{{ url_for('doctor.delete_details', id=edu.id) }}"><i class="fa-solid fa-trash text-danger border border-2 border-danger pe-2 ps-2 pt-2 pb-1 fs-5"></i></a>
                        </div>
                        
                    </div>
                </div>
            </div>    
                    </form>
                    {% endfor %}
                    <legend class=" me-5 mt-3 text-success">
                        Work Schedule
                    </legend>
                    <div class="card shadow mb-3">
                        <div class="card ">
                        <div class="card-body">
                            {% for sc in schedules %}
                            <form method="POST" class="text-start needs-validation mb-3" action="{{ url_for('doctor.update_details', id=sc.id) }}" novalidate>
                                {{ schedule_form.csrf_token(id='schedule_csrf_token' + sc.id) }}
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="day_of_week_{{ sc.id }}" class="form-label fw-bold mt-2">
                                                {{ schedule_form.day_of_week.label.text }}
                                            </label>
                                            {% if schedule_form.day_of_week.errors %}
                                            {{ schedule_form.day_of_week(class="form-select is-invalid") }}
                                            <div class="invalid-feedback">
                                                {% for error in schedule_form.day_of_week.errors %}
                                                    <span>{{ error }}</span>
                                                {% endfor %}
                                            </div>
                                        {% else %}
                                        <select id="day_of_week_{{ sc.id }}" name="day_of_week" class="form-select" style="height: 37px;">
                                            {% for choice in schedule_form.day_of_week.choices %}
                                                {% if choice[0] == sc.day_of_week %}
                                                    <option value="{{ choice[0] }}"  disabled selected>{{ choice[1] }}</option>
                                                {% else %}
                                                    <option value="{{ choice[0] }}" disabled >{{ choice[1] }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                        {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="start_time_{{ sc.id }}" class="form-control-label mt-2 mb-2 fw-bold">
                                                {{ schedule_form.start_time.label.text }}
                                            </label>
                                            {% if schedule_form.start_time.errors %}
                                                {{ schedule_form.start_time(class="form-control form-control-sm is-invalid", id='start_time_' + sc.id) }}
                                                <div class="invalid-feedback">
                                                    {% for error in schedule_form.start_time.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ schedule_form.start_time(class="form-control form-control-sm", style="height: 30px;", value=sc.start_time, id='start_time_' + sc.id) }}
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="end_time_{{ sc.id }}" class="form-control-label mt-2 mb-2 fw-bold">
                                                {{ schedule_form.end_time.label.text }}
                                            </label>
                                            {% if schedule_form.end_time.errors %}
                                                {{ schedule_form.end_time(class="form-control form-control-sm is-invalid", id='end_time_' + sc.id) }}
                                                <div class="invalid-feedback">
                                                    {% for error in schedule_form.end_time.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ schedule_form.end_time(class="form-control form-control-sm", style="height: 30px;", value=sc.end_time, id='end_time_' + sc.id) }}
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            {{ schedule_form.schedule_submit(class="btn btn-outline-info bg-primary mt-5 pt-1 text-white", style="height: 30px;", id='submit_' + sc.id) }}
                                        </div>
                                    </div>
                                </div>
                            </form>
                            {% endfor %}
                            
                </div>
            </div>
        </div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
